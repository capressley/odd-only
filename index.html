<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Odd-Only Reaction Game</title>

<link rel="manifest" href="manifest.webmanifest" />
<meta name="theme-color" content="#111111" />

<style>
  body {
    margin: 0;
    background: #111;
    color: #fff;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    text-align: center;
  }

  .game {
    width: 100%;
    max-width: 420px;
    padding: 20px;
  }

  .hud {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    font-size: 1.2rem;
  }

  .number {
    font-size: 6rem;
    margin: 20px 0;
  }

  button {
    font-size: 1.8rem;
    padding: 1.2rem 2rem;
    border-radius: 14px;
    border: none;
    background: #58d26a;
    color: #000;
    font-weight: bold;
    width: 100%;
  }

  #overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.88);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10;
  }

  #overlay.show {
    display: flex;
  }

  .modal {
    text-align: center;
    padding: 20px;
  }

  img {
    width: 100%;
    max-width: 380px;
    border-radius: 18px;
    margin-top: 14px;
  }

  input {
    font-size: 1.5rem;
    text-transform: uppercase;
    text-align: center;
    width: 120px;
    margin-top: 10px;
  }

  .leaderboard {
    margin-top: 12px;
    font-size: 1rem;
    opacity: 0.9;
  }
</style>
</head>

<body>

<div class="game">
  <div class="hud">
    <div>Score: <span id="score">0</span></div>
    <div>Strikes: <span id="strikes"></span></div>
  </div>

  <div class="number" id="number">0</div>
  <button id="tap">Tap ONLY if odd</button>
</div>

<div id="overlay">
  <div class="modal">
    <h1>GAME OVER</h1>
    <p>Final Score: <span id="finalScore">0</span></p>

    <img id="memeImg" src="Screenshot_20260118-114905.png" alt="Game Over" />

    <div>
      <p>Enter Initials</p>
      <input id="initials" maxlength="3" />
    </div>

    <button id="playAgain">Play Again</button>

    <div class="leaderboard" id="leaderboard"></div>
  </div>
</div>

<script>
let current = 0;
let score = 0;
let strikes = 0;
let speed = 420;
let running = false;
let timer;

const numberEl = document.getElementById("number");
const scoreEl = document.getElementById("score");
const strikeEl = document.getElementById("strikes");
const overlay = document.getElementById("overlay");
const memeImg = document.getElementById("memeImg");

function randomNumber() {
  return Math.floor(Math.random() * 999) + 1;
}

function updateHUD() {
  scoreEl.textContent = score;
  strikeEl.textContent = "X".repeat(strikes);
}

function startGame() {
  score = 0;
  strikes = 0;
  speed = 420;
  running = true;
  updateHUD();
  nextTick();
}

function stopGame() {
  running = false;
  clearTimeout(timer);
}

function nextTick() {
  if (!running) return;

  current = randomNumber();
  numberEl.textContent = current;

  speed = Math.max(120, speed * (0.96 + Math.random() * 0.04));
  timer = setTimeout(nextTick, speed);
}

document.getElementById("tap").addEventListener("click", () => {
  if (!running) return;

  if (current % 2 === 1) {
    score++;
    updateHUD();
  } else {
    strikes++;
    updateHUD();
    if (strikes >= 3) endGame();
  }
});

function endGame() {
  stopGame();
  overlay.classList.add("show");
  document.getElementById("finalScore").textContent = score;
  renderLeaderboard();
}

function saveScore(initials) {
  const board = JSON.parse(localStorage.getItem("odd-only-scores") || "[]");
  board.push({ initials, score });
  board.sort((a,b) => b.score - a.score);
  localStorage.setItem("odd-only-scores", JSON.stringify(board.slice(0,5)));
}

function renderLeaderboard() {
  const board = JSON.parse(localStorage.getItem("odd-only-scores") || "[]");
  document.getElementById("leaderboard").innerHTML =
    "<h3>High Scores</h3>" +
    board.map(e => `${e.initials} â€” ${e.score}`).join("<br>");
}

document.getElementById("playAgain").addEventListener("click", () => {
  const initials = document.getElementById("initials").value || "???";
  saveScore(initials.toUpperCase());
  document.getElementById("initials").value = "";
  overlay.classList.remove("show");
  startGame();
});

startGame();

/* PWA safe */
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("./sw.js");
  });
}
</script>

</body>
</html>
